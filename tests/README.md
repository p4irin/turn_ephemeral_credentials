# Testing the credentials generated by turn_ephemeral_credentials

The [aioice]((https://aioice.readthedocs.io/en/stable/api.html)) library is used to test the credentials against a [coturn](https://github.com/coturn/coturn) TURN server.

## Stack

- Python 3.8.10 on Ubuntu 20.04.2 LTS
- coturn 4.5.1.1-1.1build2 on Ubuntu 20.04 LTS

## Before running the tests

- Set a shared secret
- Set environment variables in a `.env` file

### TURN server shared secret

Make sure your TURN server supports [A REST API For Access To TURN Services](https://datatracker.ietf.org/doc/html/draft-uberti-behave-turn-rest-00#section-2.1). Enabling support involves setting a _shared secret_. Following is an example of configuration directives in `/etc/turnserver.conf` to set a shared secret for a coturn server running on Ubuntu 20.04 LTS.

```bash
...
use-auth-secret
static-auth-secret=<Some shared secret>
...
```

Consult [coturn](https://github.com/coturn/coturn) for more information about configuring a _coturn_ server in general.

### .env.example

Set your TURN server specific parameters in the file `.env.example` and then rename it to `.env`.

## Reference

- [aioice GitHub](https://github.com/aiortc/aioice)
- [aioice.readthedocs.io](https://aioice.readthedocs.io/en/stable/api.html)
- [unittest.IsolatedAsyncioTestCase](https://docs.python.org/3.8/library/unittest.html#unittest.IsolatedAsyncioTestCase)
- [coturn](https://github.com/coturn/coturn)

